import{b2 as g,b3 as h,b1 as m,d as W,r as H,k as M,o as l,c,e as a,t as f,f as e,b as d,w as _,u as N,g as S,F as C,A as V,h as $,p as x,i as G,j as R}from"./index-95e0417b.js";import{A as B}from"./index-571b3aeb.js";import"./Input-b78db60b.js";import"./Suffix-ac62c6bb.js";import"./use-merged-state-2a0ec557.js";const O=o=>{const s={...o,Password:g(h(o.Password)),Code:h(o.Code)};return m({url:"/CoinAI/sys/restart",data:s,method:"post",SatelliteServe:s.SatelliteServe})},j=o=>{const s={...o,Password:g(h(o.Password)),Code:h(o.Code)};return m({url:"/CoinAI/sys/remove",data:s,method:"post",SatelliteServe:s.SatelliteServe})},z=o=>{const s={...o,Password:g(h(o.Password)),Code:h(o.Code)};return m({url:"/CoinAI/sys/TheOpen",data:s,method:"post",SatelliteServe:s.SatelliteServe})},i=o=>(x("data-v-25c2f919"),o=o(),G(),o),E={class:"SysManage"},L={className:"SysManage__hint"},T={className:"SysManage__hint new"},F=i(()=>a("a",{href:"https://github.com/AItrade-mo7/CoinAIPackage",target:"_blank",class:"lineHeight"},"(GitHub)",-1)),K={class:"btn-wrapper"},U={class:"warn"},q={key:0},J={key:0,class:"SysManage__hint"},Q=i(()=>a("span",{className:"lineHeight-success"},"更新并重启",-1)),X={key:1},Y={key:1},Z=i(()=>a("a",{href:"https://github.com/AItrade-mo7/CoinAIPackage",target:"_blank",class:"lineHeight"},"GitHub",-1)),ee=i(()=>a("span",{class:"lineHeight-warn"},"冷重启",-1)),se={key:2},te=i(()=>a("span",{class:"lineHeight-err"},"停止",-1)),oe=i(()=>a("span",{class:"lineHeight-err"},"彻底删除",-1)),ae=i(()=>a("br",null,null,-1)),ne=i(()=>a("br",null,null,-1)),ie={key:0},re=i(()=>a("br",null,null,-1)),le=i(()=>a("br",null,null,-1)),ce=i(()=>a("br",null,null,-1)),de={key:0},_e=W({__name:"SysManage",props:{WssData:Object},setup(o){const s=o;let w=!1;s.WssData.GithubVersion&&s.WssData.SysVersion&&(w=s.WssData.GithubVersion!==s.WssData.SysVersion);let u=H(0);const k=()=>{u.value=-1},b=()=>{u.value=1},p=n=>{let t="修改资料";n==1&&(t="重启服务"),n==-1&&(t="删除服务"),n==2&&(t="公开服务"),B({EmailAction:t,IsPassword:!0,async OkBack(r){const v={Password:r.Password,Code:r.Code};if(n===1)return A(v);if(n===-1)return I(v);if(n===2)return D(v)}})},I=async n=>{(await j({...n,SatelliteServe:s.WssData.ServeID})).Code>0&&window.$message.warning("删除指令已发送!",{onAfterLeave(){window.location.replace("/SatelliteServe")}})},A=async n=>{(await O({...n,SatelliteServe:s.WssData.ServeID})).Code>0&&window.$message.success("重启指令已发送!请等待页面跳转",{onAfterLeave(){V.remove("SatelliteServe"),window.location.replace("/SatelliteServe")},duration:5e3})},D=async n=>{const t=await z({...n,SatelliteServe:s.WssData.ServeID});t.Code>0&&(window.$message.success(t.Msg),window.$Event.CoinAIGetConfig())},P=async()=>{u.value=2};return(n,t)=>{const r=$,v=M("RouterLink");return l(),c("div",E,[a("div",L,"当前版本："+f(s.WssData.SysVersion),1),a("div",T,[e(" 最新版本："+f(s.WssData.GithubVersion)+" ",1),F]),a("div",K,[d(r,{ghost:"",type:"error",onClick:k},{default:_(()=>[e(" 停止服务 ")]),_:1}),d(r,{ghost:"",type:"success",onClick:b},{default:_(()=>[e(" 更新并重启 ")]),_:1}),d(r,{ghost:"",onClick:P},{default:_(()=>[e(f(s.WssData.IsPublic?"隐藏":"公开")+"服务 ",1)]),_:1})]),a("div",U,[u.value==0?(l(),c("div",q,[N(w)?(l(),c("div",J,[e(" 建议执行 "),Q,e(" 操作或查看 "),d(v,{to:"/About/ReleaseNotes",className:"lineHeight"},{default:_(()=>[e("更新日志")]),_:1})])):(l(),c("div",X,"程序将 7*24 小时监听您的账户,并根据您的设置自动执行交易。"))])):S("",!0),u.value==1?(l(),c("div",Y,[e(" 将会从 "),Z,e(" 下载最新安装包,并完成 "),ee,e(", 重启之后该服务下的所有账户将会重新受到托管。 "),d(r,{size:"tiny",type:"success",onClick:t[0]||(t[0]=y=>p(1))},{default:_(()=>[e("执行升级")]),_:1})])):S("",!0),u.value==-1?(l(),c("div",se,[e(" 这将彻底 "),te,e(" 您的服务，"),oe,e("包括程序文件和本地的运行日志。 "),ae,e(" 但该服务器的数据不会丢失，稍后可重新部署并自动恢复。 "),ne,e(" 若想彻底删除数据，请在停止服务后前往 "),d(v,{to:"/SatelliteServe",className:"lineHeight"},{default:_(()=>[e(" 卫星服务管理列表 ")]),_:1}),e(" 执行删除。 "),d(r,{size:"tiny",type:"error",onClick:t[1]||(t[1]=y=>p(-1))},{default:_(()=>[e("我就是要停止它")]),_:1})])):S("",!0),s.WssData.IsPublic?S("",!0):(l(),c(C,{key:3},[u.value==2?(l(),c("div",ie,[e(" 公开此卫星服务以便被其它人查看和使用，同时您具有该卫星服务的最高掌控权，未来也将开放更多的可自定义功能为您独享。"),re,e(" 卫星服务下绑定的每一个 Key 都是平等的。 "),le,e(" 我们鼓励您公开自己的卫星服务供他人使用，这样可以拥有更多的数据样例供开发者参考优化。同时该卫星服务的运营和维护以及安全也将由您来负责。 "),ce,d(r,{size:"tiny",type:"primary",onClick:t[2]||(t[2]=y=>p(2))},{default:_(()=>[e("确认公开")]),_:1})])):S("",!0)],64)),s.WssData.IsPublic?(l(),c(C,{key:4},[u.value==2?(l(),c("div",de,[e(" 在公开列表中隐藏此卫星服务，只有此服务的部署者拥有访问权限。其它用户可以通过 ApiKey 管理列表直接解除该服务对个人账户的托管。 "),d(r,{size:"tiny",onClick:t[3]||(t[3]=y=>p(2))},{default:_(()=>[e("确认隐藏")]),_:1})])):S("",!0)],64)):S("",!0)])])}}});const ye=R(_e,[["__scopeId","data-v-25c2f919"]]);export{ye as default};
