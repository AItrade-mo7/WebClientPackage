import{v as m}from"./verify-fcd68c05.js";import{d as v,r as s,o as d,aE as f,w as p,f as _,t as E,cD as C,h as g}from"./index-95e0417b.js";const w=v({__name:"SendCode",props:{Email:String,Action:String,EntrapmentCode:String},setup(o){const t=o;let e=s(0),a=null;const i=()=>e.value===0?(l.value=!1,"发送验证码"):(l.value=!0,`重新发送${e.value}`);let l=s(!1);const c=async()=>{clearInterval(a);const r=m("Email",t.Email);if(r){window.$message.error(r);return}e.value=60,a=setInterval(()=>{e.value--,e.value<1&&(e.value=0,clearInterval(a))},1e3);const n=await C({Email:t.Email,Action:t.Action,EntrapmentCode:t.EntrapmentCode}).catch(()=>{l.value=!1,e.value=0,clearInterval(a)});n&&n.Code>0?(window.$message.success(n.Msg),e.value<1&&(e.value=60,clearInterval(a))):(e.value=0,clearInterval(a))};return(r,n)=>{const u=g;return d(),f(u,{type:"primary",Email:t.Email,disabled:l.value,onClick:c,ghost:""},{default:p(()=>[_(E(i()),1)]),_:1},8,["Email","disabled"])}}});export{w as default};
